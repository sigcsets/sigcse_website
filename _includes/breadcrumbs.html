<!-- https://stackoverflow.com/questions/9612235/what-are-some-good-ways-to-implement-breadcrumbs-on-a-jekyll-site -->

<div class="nav-scroller">

  {% capture url_parts %} {{ page.url | remove: "/index.html" | replace:'/'," " }}{% endcapture %}
  {% capture num_parts %}{{ url_parts | number_of_words | minus: 1 }}{% endcapture %}

  {% assign previous="" %}
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">

      {% if num_parts == "0" or num_parts == "-1" %}
        {% comment %}
        If we have only one part, then just do an absolute URL to "/". This is the
        home page and will work with both live and staging.
        {% endcomment %}
        <li class="breadcrumb-item"><a href={{"/index.html"|absolute_url}}>Home</a></li>

      {% else %}
        {% comment %}
        Otherwise, add the home breadcrum and all the other ones, one at a time.
        For all of them, add the /index.html at the end.
        {% endcomment %}
        <li class="breadcrumb-item"><a href={{"/index.html"|absolute_url}}>Home</a></li>

        {% comment %}
        <!-- From Bootstrap's documentation -->
        <!-- Separators are automatically added in CSS through ::before and content. -->
        {% endcomment %}
        {% for unused in site.breadcrumb_list limit:num_parts -%}

          {% capture first_word %}{{ url_parts | truncatewords:1 | remove:"..."}}{% endcapture -%}
          {% assign entry = site.data.capitalization | where: 'word', first_word -%}
          {% capture previous %}{{ previous }}/{{ first_word }}/index.html{% endcapture -%}

          <li class="breadcrumb-item">
            {% assign wordLength = entry | size -%}
            {% if wordLength > 0 -%}
            <a href="{{ previous | absolute_url }}">{{ entry[0].display }}</a>
            {% else -%}
            <a href="{{ previous | absolute_url }}">{{ first_word | capitalize }}</a>
            {% endif -%}
          </li>
          {% capture url_parts %}{{ url_parts | remove_first:first_word }}{% endcapture %}

        {% endfor %}
      {% endif %}

      {% comment %}
      Generate the last link, which is a non-link representing the current page
      {% endcomment %}
      <li class="breadcrumb-item active" aria-current="page">{{ page.title | truncate: 25}}</li>
    </ol>
  </nav>
</div>